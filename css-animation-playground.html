<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Animation Playground - DesignAssist</title>
  <style>
    /* Basic reset and typography */
    body {
      margin: 0;
      padding: 0;
      background-color: #f7fafc; /* light gray background */
      color: #402000; /* dark text */
      font-family: sans-serif;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 20px;
    }
    header {
      background-color: #18C1F3; /* primary */
      color: #fff;
      padding: 16px;
      border-radius: 4px;
      margin-bottom: 20px;
    }
    header h1 {
      margin: 0;
      font-size: 24px;
    }
    .section {
      background-color: #fff;
      padding: 16px;
      margin-bottom: 20px;
      border-radius: 4px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .section h2 {
      margin-top: 0;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .column {
      flex: 1;
      min-width: 300px;
    }
    .form-group {
      margin-bottom: 12px;
    }
    .form-group label {
      display: block;
      margin-bottom: 4px;
    }
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .keyframe {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    .keyframe input[type="number"] {
      width: 60px;
    }
    .keyframe input[type="text"] {
      flex: 1;
    }
    .keyframe button {
      background-color: #f56565; /* red */
      color: #fff;
      border: none;
      padding: 8px;
      border-radius: 4px;
      cursor: pointer;
    }
    button {
      cursor: pointer;
      padding: 10px;
      border: none;
      border-radius: 4px;
    }
    .btn-primary {
      background-color: #18C1F3;
      color: #fff;
      width: 100%;
    }
    .btn-secondary {
      background-color: #6969F3;
      color: #fff;
      width: 100%;
    }
    .preview-box {
      position: relative;
      border: 1px solid #ccc;
      padding: 20px;
      height: 160px;
    }
    .animated-element {
      width: 64px;
      height: 64px;
      background-color: #F66633; /* accent */
      border-radius: 4px;
      position: absolute;
      top: 48px;
      left: 48px;
    }
    pre {
      background-color: #f7fafc;
      padding: 16px;
      overflow-x: auto;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>CSS Animation Playground</h1>
    </header>

    <div class="grid">
      <div class="column section" id="animation-properties-section">
        <h2>Animation Properties</h2>
        <div class="form-group">
          <label for="duration">Duration (s)</label>
          <input type="number" id="duration" min="0" step="0.1" value="1">
        </div>
        <div class="form-group">
          <label for="timingFunction">Timing Function</label>
          <select id="timingFunction">
            <option value="ease">ease</option>
            <option value="linear">linear</option>
            <option value="ease-in">ease-in</option>
            <option value="ease-out">ease-out</option>
            <option value="ease-in-out">ease-in-out</option>
          </select>
        </div>
        <div class="form-group">
          <label for="delay">Delay (s)</label>
          <input type="number" id="delay" min="0" step="0.1" value="0">
        </div>
        <div class="form-group">
          <label for="iterationCount">Iteration Count</label>
          <input type="number" id="iterationCount" min="1" value="1">
        </div>
        <div class="form-group">
          <label for="direction">Direction</label>
          <select id="direction">
            <option value="normal">normal</option>
            <option value="reverse">reverse</option>
            <option value="alternate">alternate</option>
            <option value="alternate-reverse">alternate-reverse</option>
          </select>
        </div>
        <div class="form-group">
          <label for="fillMode">Fill Mode</label>
          <select id="fillMode">
            <option value="none">none</option>
            <option value="forwards">forwards</option>
            <option value="backwards">backwards</option>
            <option value="both">both</option>
          </select>
        </div>
      </div>

      <div class="column section" id="keyframes-section">
        <h2>Keyframes</h2>
        <div id="keyframesContainer"></div>
        <button id="addKeyframe" class="btn-secondary">Add Keyframe</button>
      </div>
    </div>

    <div class="section" id="preview-section">
      <h2>Preview</h2>
      <div class="preview-box">
        <style id="previewKeyframesStyle"></style>
        <div id="previewElement" class="animated-element"></div>
      </div>
      <button id="replayAnimation" class="btn-primary">Replay Animation</button>
    </div>

    <div class="section" id="generated-css-section">
      <h2>Generated CSS</h2>
      <pre id="generatedCSS"></pre>
    </div>
  </div>

  <script>
    // Initial state
    const state = {
      duration: 1,
      timingFunction: 'ease',
      delay: 0,
      iterationCount: 1,
      direction: 'normal',
      fillMode: 'none',
      keyframes: [
        { offset: 0, transform: 'translateX(0)' },
        { offset: 1, transform: 'translateX(100px)' }
      ]
    };

    // Update the preview element's animation style
    function updatePreview() {
      const previewElement = document.getElementById('previewElement');
      previewElement.style.animation = `myAnimation ${state.duration}s ${state.timingFunction} ${state.delay}s ${state.iterationCount} ${state.direction} ${state.fillMode}`;
      updateKeyframesStyle();
      updateGeneratedCSS();
    }

    // Generate the @keyframes CSS and inject it into a style element in the preview
    function updateKeyframesStyle() {
      const styleEl = document.getElementById('previewKeyframesStyle');
      const keyframesCSS = state.keyframes.map(kf => {
        const percentage = kf.offset * 100;
        return `${percentage}% { transform: ${kf.transform}; }`;
      }).join('\n');
      styleEl.innerHTML = `@keyframes myAnimation {\n${keyframesCSS}\n}`;
    }

    // Generate the full CSS code and display it in the "Generated CSS" section
    function updateGeneratedCSS() {
      const generatedCSS = document.getElementById('generatedCSS');
      const keyframesCSS = state.keyframes.map(kf => {
        const percentage = kf.offset * 100;
        return `${percentage}% { transform: ${kf.transform}; }`;
      }).join('\n  ');
      const cssCode = `@keyframes myAnimation {\n  ${keyframesCSS}\n}\n\n.animated-element {\n  animation: myAnimation ${state.duration}s ${state.timingFunction} ${state.delay}s ${state.iterationCount} ${state.direction} ${state.fillMode};\n}`;
      generatedCSS.textContent = cssCode;
    }

    // Render keyframes UI list
    function updateKeyframesUI() {
      const container = document.getElementById('keyframesContainer');
      container.innerHTML = '';
      state.keyframes.forEach((kf, index) => {
        const div = document.createElement('div');
        div.className = 'keyframe';
        
        // Offset input
        const offsetInput = document.createElement('input');
        offsetInput.type = 'number';
        offsetInput.min = '0';
        offsetInput.max = '1';
        offsetInput.step = '0.1';
        offsetInput.value = kf.offset;
        offsetInput.addEventListener('input', (e) => {
          state.keyframes[index].offset = parseFloat(e.target.value);
          updatePreview();
        });
        div.appendChild(offsetInput);
        
        // Transform input
        const transformInput = document.createElement('input');
        transformInput.type = 'text';
        transformInput.value = kf.transform;
        transformInput.placeholder = 'transform: translateX(0)';
        transformInput.addEventListener('input', (e) => {
          state.keyframes[index].transform = e.target.value;
          updatePreview();
        });
        div.appendChild(transformInput);
        
        // Remove button
        const removeButton = document.createElement('button');
        removeButton.textContent = 'X';
        removeButton.addEventListener('click', () => {
          state.keyframes.splice(index, 1);
          updateKeyframesUI();
          updatePreview();
        });
        div.appendChild(removeButton);
        
        container.appendChild(div);
      });
    }

    // Bind animation properties inputs
    document.getElementById('duration').addEventListener('input', (e) => {
      state.duration = parseFloat(e.target.value);
      updatePreview();
    });
    document.getElementById('timingFunction').addEventListener('change', (e) => {
      state.timingFunction = e.target.value;
      updatePreview();
    });
    document.getElementById('delay').addEventListener('input', (e) => {
      state.delay = parseFloat(e.target.value);
      updatePreview();
    });
    document.getElementById('iterationCount').addEventListener('input', (e) => {
      state.iterationCount = parseInt(e.target.value, 10);
      updatePreview();
    });
    document.getElementById('direction').addEventListener('change', (e) => {
      state.direction = e.target.value;
      updatePreview();
    });
    document.getElementById('fillMode').addEventListener('change', (e) => {
      state.fillMode = e.target.value;
      updatePreview();
    });

    // Add keyframe button
    document.getElementById('addKeyframe').addEventListener('click', () => {
      state.keyframes.push({ offset: 1, transform: 'translateX(0)' });
      updateKeyframesUI();
      updatePreview();
    });

    // Replay animation by removing and re-adding the animation style
    document.getElementById('replayAnimation').addEventListener('click', () => {
      const previewElement = document.getElementById('previewElement');
      previewElement.style.animation = 'none';
      // Force reflow to restart animation
      void previewElement.offsetWidth;
      updatePreview();
    });

    // Initial render
    updateKeyframesUI();
    updatePreview();
  </script>
</body>
</html>
